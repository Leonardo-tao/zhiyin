(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47240d33"],{"14d9":function(t,e,s){"use strict";var r=s("23e7"),i=s("7b0b"),n=s("07fa"),o=s("3a34"),a=s("3511"),c=s("d039"),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},l=u||!h();r({target:"Array",proto:!0,arity:1,forced:l},{push:function(t){var e=i(this),s=n(e),r=arguments.length;a(s+r);for(var c=0;c<r;c++)e[s]=arguments[c],s++;return o(e,s),s}})},"1bbf":function(t,e,s){},3511:function(t,e,s){"use strict";var r=TypeError,i=9007199254740991;t.exports=function(t){if(t>i)throw r("Maximum allowed index exceeded");return t}},"3a34":function(t,e,s){"use strict";var r=s("83ab"),i=s("e8b5"),n=TypeError,o=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw new n("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},"3f09":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-count-down"},[t.msTime.show?e("p",[t.msTime.day>0?e("span",[e("span",[t._v(t._s(t.msTime.day))]),e("i",[t._v(t._s(t.dayTxt))])]):t._e(),e("span",[t._v(t._s(t.msTime.hour))]),e("i",[t._v(t._s(t.hourTxt))]),e("span",[t._v(t._s(t.msTime.minutes))]),e("i",[t._v(t._s(t.minutesTxt))]),e("span",[t._v(t._s(t.msTime.seconds))]),e("i",[t._v(t._s(t.secondsTxt))])]):t._e(),t.msTime.show?t._e():e("p",[t._v(t._s(t.endText))])])},i=[],n={name:"MvCountDown",replace:!0,data(){return{tipShow:!0,msTime:{show:!1,day:"",hour:"",minutes:"",seconds:""},star:"",end:"",current:""}},props:{isStart:{type:Boolean,default:!1},tipText:{type:String,default:"距离开始"},tipTextEnd:{type:String,default:"距离结束"},id:{type:String,default:"1"},currentTime:{type:Number},startTime:{type:Number},endTime:{type:Number},endText:{type:String,default:"已结束"},dayTxt:{type:String,default:":"},hourTxt:{type:String,default:":"},minutesTxt:{type:String,default:":"},secondsTxt:{type:String,default:":"},secondsFixed:{type:Boolean,default:!1}},mounted(){console.log(this)},watch:{isStart:{handler:function(t){t&&this.gogogo()},immediate:!0},currentTime:function(t,e){this.gogogo()}},methods:{gogogo(){10==this.startTime.toString().length?this.star=1e3*this.startTime:this.star=this.startTime,10==this.endTime.toString().length?this.end=1e3*this.endTime:this.end=this.endTime,this.currentTime?10==this.currentTime.toString().length?this.current=1e3*this.currentTime:this.current=this.currentTime:this.current=(new Date).getTime(),this.end<this.current?(this.msTime.show=!1,this.end_message()):this.current<this.star?(this.$set(this,"tipShow",!0),this.$nextTick(()=>{this.runTime(this.star,this.current,this.start_message)})):(this.end>this.current&&this.star<this.current||this.star==this.current)&&(this.$set(this,"tipShow",!1),this.msTime.show=!0,this.$emit("start_callback",this.msTime.show),this.$nextTick(()=>{this.runTime(this.end,this.star,this.end_message,!0)}))},runTime(t,e,s,r){let i=this.msTime,n=t-e;if(n>0){this.msTime.show=!0,i.day=Math.floor(n/864e5),n-=864e5*i.day,i.hour=Math.floor(n/36e5),n-=36e5*i.hour,i.minutes=Math.floor(n/6e4),n-=6e4*i.minutes,i.seconds=Math.floor(n/1e3).toFixed(0),n-=1e3*i.seconds,i.hour<10&&(i.hour="0"+i.hour),i.minutes<10&&(i.minutes="0"+i.minutes),i.seconds<10&&(i.seconds="0"+i.seconds);let t=Date.now(),o=Date.now(),a=o-t;setTimeout(()=>{r?this.runTime(this.end,e+=1e3,s,!0):this.runTime(this.star,e+=1e3,s)},1e3-a)}else s()},start_message(){this.$set(this,"tipShow",!1),this.$emit("startCallback",this.msTime.show),this.$nextTick(()=>{this.runTime(this.end,this.star,this.end_message,!0)})},end_message(){this.msTime.show=!1,this.currentTime<=0||this.$emit("endCallback",this.msTime.show)}},destroyed(){}},o=n,a=(s("7d54c"),s("2877")),c=Object(a["a"])(o,r,i,!1,null,"351b247a",null);e["default"]=c.exports},"5c7b":function(t,e,s){"use strict";s("d0a9")},"7d54c":function(t,e,s){"use strict";s("1bbf")},"89e3":function(t,e,s){"use strict";s("ec32")},ad1f:function(t,e,s){t.exports=s.p+"static/img/qrcode.6514a2c7.png"},b966:function(t,e,s){t.exports=s("3f09")},cc48:function(t,e,s){"use strict";s.d(e,"k",(function(){return n})),s.d(e,"j",(function(){return o})),s.d(e,"b",(function(){return a})),s.d(e,"h",(function(){return c})),s.d(e,"f",(function(){return u})),s.d(e,"l",(function(){return h})),s.d(e,"g",(function(){return l})),s.d(e,"i",(function(){return d})),s.d(e,"d",(function(){return m})),s.d(e,"c",(function(){return p})),s.d(e,"m",(function(){return f})),s.d(e,"e",(function(){return g})),s.d(e,"o",(function(){return b})),s.d(e,"a",(function(){return y})),s.d(e,"n",(function(){return v}));var r=s("b775");const i="/api/app/pub/content";function n(){return Object(r["a"])({url:i+"/get/subjects",method:"get"})}function o(t){return Object(r["a"])({url:`${i}/get/subject/parent/${t}`,method:"get"})}function a(){return Object(r["a"])({url:i+"/get/banners",method:"get"})}function c(t){return Object(r["a"])({url:i+"/get/courses",method:"post",data:t})}function u(t){return Object(r["a"])({url:`${i}/get/courses/${t}`,method:"get"})}function h(t){return Object(r["a"])({url:`${i}/get/teacher/${t}`,method:"get"})}function l(t){return Object(r["a"])({url:i+"/get/course/orders",method:"post",data:t})}function d(t){return Object(r["a"])({url:`${i}/get/course/isbuy/${t}`,method:"get"})}function m(t){return Object(r["a"])({url:`${i}/get/chapters/${t}`,method:"get"})}function p(t){return Object(r["a"])({url:`${i}/get/videos/${t}`,method:"get"})}function f(t){return Object(r["a"])({url:i+"/get/video/auth",method:"post",data:t})}function g(t){return Object(r["a"])({url:i+"/get/course/comment",method:"post",data:t})}function b(t){return Object(r["a"])({url:i+"/publish/comment",method:"post",data:t})}function y(t){return Object(r["a"])({url:i+"/course/pay/create",method:"post",data:t})}function v(t){return Object(r["a"])({url:`${i}/course/pay/succeed/${t}`,method:"post"})}},d0a9:function(t,e,s){},e8b5:function(t,e,s){"use strict";var r=s("c6b6");t.exports=Array.isArray||function(t){return"Array"===r(t)}},ec32:function(t,e,s){},f3c9:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("el-row",{attrs:{type:"flex",justify:"center"}},[e("el-col",{attrs:{span:20}},[e("el-breadcrumb",{staticStyle:{margin:"20px 0",color:"#333"},attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",[t._v("全部课程")]),t._l(t.getDetailsSubject(t.course.subjectParent),(function(s,r){return e("el-breadcrumb-item",{key:r},[t._v(" "+t._s(s)+" ")])})),e("el-breadcrumb-item",[t._v(t._s(t.course.title))])],2),e("div",{staticStyle:{position:"relative",width:"100%"}},[e("v-course-player",{ref:"CoursePlayer"}),t.showBuyBanner?e("div",{staticClass:"sub-course"},[e("div",[e("div",{staticStyle:{color:"#fff","font-size":"20px"}},[t._v(" "+t._s(t.course.title)+" "),e("span",{staticStyle:{color:"#ff4f23","margin-left":"20px"}},[t._v("￥"+t._s(t.course.price))])]),e("div",{staticStyle:{color:"#999","font-size":"13px","margin-top":"5px"}},[e("span",{staticStyle:{"margin-right":"26px"}},[t._v(t._s(t.course.lessonNum)+" 总课时")]),e("span",{staticStyle:{"margin-right":"26px"}},[t._v(t._s(t.course.buyCount)+" 人订阅过")]),e("span",[t._v(t._s(t.course.viewCount)+" 人观看过")])])]),e("div",{staticStyle:{"margin-left":"auto"}},[e("div",{staticStyle:{width:"22vw","text-align":"center"}},[e("el-button",{staticStyle:{width:"18vw","font-size":"18px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.openBuyCourseDialog}},[t._v(" 订阅课程 ")])],1)])]):t._e()],1),e("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[e("div",{staticStyle:{width:"73%","background-color":"#fff",padding:"10px 20px",float:"left"}},[e("el-tabs",[e("el-tab-pane",{staticClass:"course-descriptiont",attrs:{label:"课程概述"},domProps:{innerHTML:t._s(t.course.description)}}),e("el-tab-pane",{attrs:{label:"课程评价",lazy:""}},[e("v-course-comment",{attrs:{course:t.course}})],1)],1)],1),e("div",{staticStyle:{width:"26%","background-color":"#fff",float:"right"}},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("讲师简介")]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("router-link",{attrs:{to:{name:"SearchByTeacher",params:{teacher:t.teacher.id||0}}}},[e("el-avatar",{staticStyle:{float:"left","margin-right":"12px"},attrs:{fit:"contain",src:t.teacher.avatar,size:70}})],1),e("div",[e("div",{staticStyle:{color:"#20a0ff","font-size":"18px",cursor:"pointer"},on:{click:function(e){return t.linkToTeacher(t.teacher.id)}}},[t._v(" "+t._s(t.teacher.name)+" ")]),e("div",{staticStyle:{"margin-top":"10px","font-size":"14px"},attrs:{title:t.teacher.email}},[e("i",{staticClass:"el-icon-message"}),t._v(" "+t._s(t.teacher.email)+" ")])])],1),e("div",{staticStyle:{"margin-top":"12px","font-size":"15px","line-height":"24px",color:"#666"}},[t._v(" "+t._s(t.teacher.intro)+" ")])])],1)])],1),e("el-dialog",{attrs:{title:`支付订单《${t.course.title}》`,visible:t.buyCourseDialogVisible,"close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",width:"36vw"},on:{"update:visible":function(e){t.buyCourseDialogVisible=e}}},[e("div",{staticStyle:{"text-align":"center","margin-bottom":"12px"}},[e("span",[t._v(" 订单编号: "+t._s(t.orderNo))]),e("span",{staticStyle:{"margin-left":"24px"}},[t._v("金额: "),e("span",{staticStyle:{color:"#ff4f23"}},[t._v("￥"+t._s(t.course.price))])])]),e("div",{staticStyle:{"text-align":"center","font-size":"16px"}},[e("img",{attrs:{src:s("ad1f")}})]),e("div",{staticStyle:{"text-align":"center","font-size":"16px"}},[t._v(" 请在以下时间内完成支付: "),e("mv-count-down",{staticStyle:{"margin-top":"7px"},attrs:{"start-time":(new Date).getTime(),"end-time":(new Date).getTime()+18e5,"end-text":"支付订阅已经过期，请关闭再打开刷新","hour-txt":"小时","minutes-txt":"分钟","seconds-txt":"秒","is-start":!0}})],1),e("div",{staticStyle:{margin:"36px 0 50px 0","text-align":"center"}},[e("el-button",{staticStyle:{width:"16vw","font-size":"20px"},attrs:{type:"primary",icon:"el-icon-shopping-cart-2"},on:{click:t.buyCourse}},[t._v(" 点击支付 ")])],1)])],1)},i=[],n=(s("14d9"),s("cc48")),o=s("b966"),a=s.n(o),c=s("2f62"),u={name:"Course",components:{"v-course-player":()=>s.e("chunk-2d0c8651").then(s.bind(null,"3ddd")),"v-course-comment":()=>s.e("chunk-f7985aca").then(s.bind(null,"d76d")),MvCountDown:a.a},data(){return{course:{},teacher:{},buyCourseDialogVisible:!1,orderNo:"",isBuyTheCourse:!1}},computed:{...Object(c["b"])(["user"]),showBuyBanner:function(){return!(0===this.course.price||this.isBuyTheCourse)}},created(){const t=this.$route.params.id;this.getCourseData(t),this.getIsBuyCourse(t)},methods:{getCourseData(t){Object(n["f"])(t).then(t=>{this.course=t.data,this.getTeacher(this.course.teacherId),setTimeout(function(){this.$refs.CoursePlayer.setData(this.course)}.bind(this),100)})},getTeacher(t){Object(n["l"])(t).then(t=>{this.teacher=t.data})},getIsBuyCourse(t){null!==this.user&&0!==Object.keys(this.user).length&&Object(n["i"])(t).then(t=>{this.isBuyTheCourse=t.data})},getDetailsSubject(t){let e=[],s=t;while(s)e=[s.title,...e],s=s.parent;return e},openBuyCourseDialog(){if(null===this.user||0===Object.keys(this.user).length)return void this.$login();const t={courseId:this.course.id,memberId:this.user.id,totalFee:this.course.price};Object(n["a"])(t).then(t=>{this.$message({message:t.message,type:"success",customClass:"elmessage"}),this.orderNo=t.data,this.buyCourseDialogVisible=!0})},buyCourse(){this.orderNo&&Object(n["n"])(this.orderNo).then(t=>{this.$message.success(t.message),this.buyCourseDialogVisible=!1})},linkToTeacher(t){this.$router.push({name:"SearchByTeacher",params:{teacher:t}})}}},h=u,l=(s("5c7b"),s("89e3"),s("2877")),d=Object(l["a"])(h,r,i,!1,null,"7fcac048",null);e["default"]=d.exports}}]);